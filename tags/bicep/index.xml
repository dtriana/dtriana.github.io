<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Bicep on David Triana</title><link>https://davidtriana.com/tags/bicep/</link><description>Recent content in Bicep on David Triana</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><copyright>2022 David Triana All rights reserved</copyright><lastBuildDate>Tue, 15 Oct 2024 00:00:00 +0000</lastBuildDate><atom:link href="https://davidtriana.com/tags/bicep/index.xml" rel="self" type="application/rss+xml"/><item><title>Deploying Logic Apps Standard Without App Settings Secrets</title><link>https://davidtriana.com/posts/2024/logic-app-no-secrets/</link><pubDate>Tue, 15 Oct 2024 00:00:00 +0000</pubDate><guid>https://davidtriana.com/posts/2024/logic-app-no-secrets/</guid><description>&lt;h1 id="scenario">
Scenario
&lt;a class="heading-link" href="#scenario">
&lt;i class="fa fa-link" aria-hidden="true" title="Link to heading">&lt;/i>
&lt;span class="sr-only">Link to heading&lt;/span>
&lt;/a>
&lt;/h1>
&lt;p>Logic Apps Standard use Application Settings. By default these settings have secrets, particularly the key in the connection string for the storage account used to keep the code and the state and run history of all the workflows. In addition, if using Application Insights integration, there is the instrumentation key which according to some &lt;a href="https://learn.microsoft.com/en-us/azure/azure-monitor/app/connection-strings#is-the-connection-string-a-secret">including the official documentation&lt;/a> is not really a secret, still, something I don&amp;rsquo;t like there in plain text in the settings.&lt;/p>
&lt;p>This is how it looks like after creating one using the portal, mid Oct 2024, in the East US region:&lt;/p>
&lt;p>&lt;img src="https://davidtriana.com/images/posts/2024/no-secrets-default.png" alt="Default App Settings Deployed from the Portal">&lt;/p>
&lt;h2 id="solution">
Solution
&lt;a class="heading-link" href="#solution">
&lt;i class="fa fa-link" aria-hidden="true" title="Link to heading">&lt;/i>
&lt;span class="sr-only">Link to heading&lt;/span>
&lt;/a>
&lt;/h2>
&lt;p>With the &lt;a href="https://learn.microsoft.com/en-us/azure/logic-apps/create-single-tenant-workflows-azure-portal#set-up-managed-identity-access-to-your-storage-account">recent announcement of support for managed identities in Logic Apps&lt;/a>, combined with the existing support for &lt;a href="https://learn.microsoft.com/en-us/azure/app-service/app-service-key-vault-references?tabs=azure-cli">Function Apps&lt;/a> and &lt;a href="https://learn.microsoft.com/en-us/azure/azure-monitor/app/azure-ad-authentication?tabs=nodejs#configure-and-enable-microsoft-entra-id-based-authentication">Application Insights&lt;/a>, I came up with a Bicep template which deploys the full underlying infrastructure without any secrets in App Settings:&lt;/p>
&lt;p>&lt;img src="https://davidtriana.com/images/posts/2024/no-secrets-without-secrets.png" alt="App Settings Without Secrets">&lt;/p>
&lt;p>Here the storage account connection string used in the WEBSITE_CONTENTAZUREFILECONNECTIONSTRING setting is now a KeyVault reference, which is populated and refreshed by the platform using RBAC and a user managed identity assigned to the Logic App.&lt;/p>
&lt;p>The earlier AzureWebjobsStorage setting, which also had the same connection string is no longer there, replaced by settings which rely on managed identities and RBAC to gain access to the storage account.&lt;/p>
&lt;p>Finally, the instrumentation key for App Insights is now a reference to a KeyVault secret.&lt;/p>
&lt;h2 id="challenges">
Challenges
&lt;a class="heading-link" href="#challenges">
&lt;i class="fa fa-link" aria-hidden="true" title="Link to heading">&lt;/i>
&lt;span class="sr-only">Link to heading&lt;/span>
&lt;/a>
&lt;/h2>
&lt;h3 id="rbac-propagation">
RBAC Propagation
&lt;a class="heading-link" href="#rbac-propagation">
&lt;i class="fa fa-link" aria-hidden="true" title="Link to heading">&lt;/i>
&lt;span class="sr-only">Link to heading&lt;/span>
&lt;/a>
&lt;/h3>
&lt;p>The first challenge is with RBAC propagation. Logic Apps need access to the storage account. This is verified during deployment, failing the deployment if, for instance, the permission in KeyVault for the Logic App to access the secret which contains the connection string is not there yet. I tried using dependsOn, outputs, modules, and while it worked every once in a while it was not consistent, every 2/3 times I was getting the error:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-text" data-lang="text">&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1&lt;/span>&lt;span>Unable to resolve Azure Files Settings from Key Vault. Details: Unable to resolve setting: WEBSITE_CONTENTAZUREFILECONNECTIONSTRING with error: AccessToKeyVaultDenied.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Even directly in the Azure Portal, assigning the role to myself I had to refresh the page and wait for up to a minute to be able to query the secrets in KeyVault.&lt;/p>
&lt;p>There is an &lt;a href="https://learn.microsoft.com/en-us/azure/azure-functions/functions-app-settings#website_skip_contentshare_validation">application setting&lt;/a> that allows the deployment to succeed by disabling the validation, but with this the file share is not created automatically, I tried creating it manually but failed to make it work.&lt;/p>
&lt;p>Adding a two minutes wait via deployment scripts gave me a consistent experience. I have deployed this Bicep at least 4 times in new resource groups in different regions with consistent success.&lt;/p>
&lt;h3 id="azure-roles">
Azure Roles
&lt;a class="heading-link" href="#azure-roles">
&lt;i class="fa fa-link" aria-hidden="true" title="Link to heading">&lt;/i>
&lt;span class="sr-only">Link to heading&lt;/span>
&lt;/a>
&lt;/h3>
&lt;p>This Bicep works fine as long as the identity used to run the deployment has the proper roles. I&amp;rsquo;m testing against an Azure subscription for which I&amp;rsquo;m the owner, however in a realistic scenario I won&amp;rsquo;t have that privilege. In a realistic corporate scenario the script will be run by Azure DevOps or GitHub actions. For those deployment pipelines to succeed, their identities need to be able to &lt;a href="https://learn.microsoft.com/en-us/azure/role-based-access-control/role-assignments-steps#step-4-check-your-prerequisites">assign roles&lt;/a> and &lt;a href="https://learn.microsoft.com/en-us/azure/azure-resource-manager/bicep/deployment-script-bicep?tabs=CLI#configure-the-minimum-permissions">run scripts&lt;/a> in addition to the permissions to deploy the resources.&lt;/p>
&lt;h3 id="system-assigned-vs-user-assigned">
System assigned vs user assigned
&lt;a class="heading-link" href="#system-assigned-vs-user-assigned">
&lt;i class="fa fa-link" aria-hidden="true" title="Link to heading">&lt;/i>
&lt;span class="sr-only">Link to heading&lt;/span>
&lt;/a>
&lt;/h3>
&lt;p>I prefer system assigned identities over user assigned. Simpler to setup, simpler to use and permissions deleted automatically when the parent resource is deleted. The problem here with system assigned is that the identity won&amp;rsquo;t be available until after the logic is deployed, but I need the identity in advance, to assign the RBAC in KeyVault. User assigned identities makes this feasible since the managed identity can be created independently of the resources which are going to use it.&lt;/p>
&lt;h2 id="the-bicep-templates">
The Bicep Templates
&lt;a class="heading-link" href="#the-bicep-templates">
&lt;i class="fa fa-link" aria-hidden="true" title="Link to heading">&lt;/i>
&lt;span class="sr-only">Link to heading&lt;/span>
&lt;/a>
&lt;/h2>
&lt;h3 id="secretsbicep">
secrets.bicep
&lt;a class="heading-link" href="#secretsbicep">
&lt;i class="fa fa-link" aria-hidden="true" title="Link to heading">&lt;/i>
&lt;span class="sr-only">Link to heading&lt;/span>
&lt;/a>
&lt;/h3>
&lt;p>Since I struggled so much with RBAC propagation I ended up leaving this portion of the script on its own module, and a more maintainable and reusable solution will have more modules than this one.&lt;/p>
&lt;p>The secrets module takes care of creating the secrets in KeyVault, in particular the storage account connection string and the Application Insights instrumentation Key. After that it gives RBAC permissions to the managed identity to read those secrets, then waits for 2 minutes.&lt;/p>
&lt;p>The RBAC permissions are set at the individual secret level. While this enforces the minimal privilege principle, alternatively the permission can be set at the KeyVault level, allowing access to all the secrets, which will be much more convenient specially since in addition to these secrets there might be others used by the workflows.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bicep" data-lang="bicep">&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1&lt;/span>&lt;span>&lt;span style="color:#8be9fd;font-style:italic">param&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">projectName&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">string&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2&lt;/span>&lt;span>&lt;span style="color:#8be9fd;font-style:italic">param&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">environmentName&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">string&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3&lt;/span>&lt;span>&lt;span style="color:#8be9fd;font-style:italic">param&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">locationName&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">string&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4&lt;/span>&lt;span>&lt;span style="color:#8be9fd;font-style:italic">param&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">storageAccountName&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">string&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5&lt;/span>&lt;span>&lt;span style="color:#8be9fd;font-style:italic">param&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">keyVaultName&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">string&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6&lt;/span>&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7&lt;/span>&lt;span>&lt;span style="color:#6272a4">// Azure Built-in roles Ref: https://learn.microsoft.com/en-us/azure/role-based-access-control/built-in-roles&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8&lt;/span>&lt;span>&lt;span style="color:#8be9fd;font-style:italic">var&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">keyVaultSecretsUserRoleDefinitionId&lt;/span> = &lt;span style="color:#f1fa8c">&amp;#39;4633458b-17de-408a-b874-0445c86b69e6&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9&lt;/span>&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10&lt;/span>&lt;span>&lt;span style="color:#8be9fd;font-style:italic">resource&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">keyVault&lt;/span> &lt;span style="color:#f1fa8c">&amp;#39;Microsoft.KeyVault/vaults@2023-07-01&amp;#39;&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">existing&lt;/span> = {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">name&lt;/span>: &lt;span style="color:#8be9fd;font-style:italic">keyVaultName&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12&lt;/span>&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13&lt;/span>&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14&lt;/span>&lt;span>&lt;span style="color:#8be9fd;font-style:italic">resource&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">storageAccount&lt;/span> &lt;span style="color:#f1fa8c">&amp;#39;Microsoft.Storage/storageAccounts@2022-05-01&amp;#39;&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">existing&lt;/span> = {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">name&lt;/span>: &lt;span style="color:#8be9fd;font-style:italic">storageAccountName&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16&lt;/span>&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17&lt;/span>&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18&lt;/span>&lt;span>&lt;span style="color:#8be9fd;font-style:italic">resource&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">appInsights&lt;/span> &lt;span style="color:#f1fa8c">&amp;#39;microsoft.insights/components@2020-02-02-preview&amp;#39;&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">existing&lt;/span> = {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">name&lt;/span>: &lt;span style="color:#f1fa8c">&amp;#39;appi-&lt;/span>&lt;span style="color:#f1fa8c">${&lt;/span>&lt;span style="color:#8be9fd;font-style:italic">projectName&lt;/span>&lt;span style="color:#f1fa8c">}&lt;/span>&lt;span style="color:#f1fa8c">-&lt;/span>&lt;span style="color:#f1fa8c">${&lt;/span>&lt;span style="color:#8be9fd;font-style:italic">environmentName&lt;/span>&lt;span style="color:#f1fa8c">}&lt;/span>&lt;span style="color:#f1fa8c">-&lt;/span>&lt;span style="color:#f1fa8c">${&lt;/span>&lt;span style="color:#8be9fd;font-style:italic">locationName&lt;/span>&lt;span style="color:#f1fa8c">}&lt;/span>&lt;span style="color:#f1fa8c">&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20&lt;/span>&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21&lt;/span>&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22&lt;/span>&lt;span>&lt;span style="color:#8be9fd;font-style:italic">resource&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">managedIdentity&lt;/span> &lt;span style="color:#f1fa8c">&amp;#39;Microsoft.ManagedIdentity/userAssignedIdentities@2022-01-31-preview&amp;#39;&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">existing&lt;/span> = {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">name&lt;/span>: &lt;span style="color:#f1fa8c">&amp;#39;mi-&lt;/span>&lt;span style="color:#f1fa8c">${&lt;/span>&lt;span style="color:#8be9fd;font-style:italic">projectName&lt;/span>&lt;span style="color:#f1fa8c">}&lt;/span>&lt;span style="color:#f1fa8c">-&lt;/span>&lt;span style="color:#f1fa8c">${&lt;/span>&lt;span style="color:#8be9fd;font-style:italic">environmentName&lt;/span>&lt;span style="color:#f1fa8c">}&lt;/span>&lt;span style="color:#f1fa8c">-&lt;/span>&lt;span style="color:#f1fa8c">${&lt;/span>&lt;span style="color:#8be9fd;font-style:italic">locationName&lt;/span>&lt;span style="color:#f1fa8c">}&lt;/span>&lt;span style="color:#f1fa8c">&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24&lt;/span>&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25&lt;/span>&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26&lt;/span>&lt;span>@&lt;span style="color:#50fa7b">description&lt;/span>(&lt;span style="color:#f1fa8c">&amp;#39;Adds the storage account connection string as a secret in KeyVault&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27&lt;/span>&lt;span>&lt;span style="color:#8be9fd;font-style:italic">resource&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">storageAccountConnStringSecret&lt;/span> &lt;span style="color:#f1fa8c">&amp;#39;Microsoft.KeyVault/vaults/secrets@2023-07-01&amp;#39;&lt;/span> = {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">name&lt;/span>: &lt;span style="color:#f1fa8c">&amp;#39;&lt;/span>&lt;span style="color:#f1fa8c">${&lt;/span>&lt;span style="color:#8be9fd;font-style:italic">storageAccount&lt;/span>.&lt;span style="color:#8be9fd;font-style:italic">name&lt;/span>&lt;span style="color:#f1fa8c">}&lt;/span>&lt;span style="color:#f1fa8c">-connectionString&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">parent&lt;/span>: &lt;span style="color:#8be9fd;font-style:italic">keyVault&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">tags&lt;/span>: {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">ResourceType&lt;/span>: &lt;span style="color:#f1fa8c">&amp;#39;StorageAccount&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">ResourceName&lt;/span>: &lt;span style="color:#8be9fd;font-style:italic">storageAccount&lt;/span>.&lt;span style="color:#8be9fd;font-style:italic">name&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33&lt;/span>&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">properties&lt;/span>: {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">contentType&lt;/span>: &lt;span style="color:#f1fa8c">&amp;#39;string&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">value&lt;/span>: &lt;span style="color:#f1fa8c">&amp;#39;DefaultEndpointsProtocol=https;AccountName=&lt;/span>&lt;span style="color:#f1fa8c">${&lt;/span>&lt;span style="color:#8be9fd;font-style:italic">storageAccountName&lt;/span>&lt;span style="color:#f1fa8c">}&lt;/span>&lt;span style="color:#f1fa8c">;AccountKey=&lt;/span>&lt;span style="color:#f1fa8c">${&lt;/span>&lt;span style="color:#50fa7b">listKeys&lt;/span>(&lt;span style="color:#8be9fd;font-style:italic">storageAccount&lt;/span>.&lt;span style="color:#8be9fd;font-style:italic">id&lt;/span>,&lt;span style="color:#f1fa8c">&amp;#39;2019-06-01&amp;#39;&lt;/span>).&lt;span style="color:#8be9fd;font-style:italic">keys&lt;/span>[&lt;span style="color:#8be9fd;font-style:italic">0&lt;/span>].&lt;span style="color:#8be9fd;font-style:italic">value&lt;/span>&lt;span style="color:#f1fa8c">}&lt;/span>&lt;span style="color:#f1fa8c">;EndpointSuffix=core.windows.net&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37&lt;/span>&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38&lt;/span>&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39&lt;/span>&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40&lt;/span>&lt;span>@&lt;span style="color:#50fa7b">description&lt;/span>(&lt;span style="color:#f1fa8c">&amp;#39;Gives permissions to the Managed Identity to retrieve the connection string from KeyVault&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41&lt;/span>&lt;span>&lt;span style="color:#8be9fd;font-style:italic">resource&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">logicAppKeyVaultConnectionStringPermission&lt;/span> &lt;span style="color:#f1fa8c">&amp;#39;Microsoft.Authorization/roleAssignments@2022-04-01&amp;#39;&lt;/span> = {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">name&lt;/span>: &lt;span style="color:#50fa7b">guid&lt;/span>(&lt;span style="color:#8be9fd;font-style:italic">keyVaultSecretsUserRoleDefinitionId&lt;/span>, &lt;span style="color:#8be9fd;font-style:italic">keyVault&lt;/span>.&lt;span style="color:#8be9fd;font-style:italic">id&lt;/span>, &lt;span style="color:#8be9fd;font-style:italic">managedIdentity&lt;/span>.&lt;span style="color:#8be9fd;font-style:italic">id&lt;/span>, &lt;span style="color:#8be9fd;font-style:italic">storageAccount&lt;/span>.&lt;span style="color:#8be9fd;font-style:italic">id&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">scope&lt;/span>: &lt;span style="color:#8be9fd;font-style:italic">storageAccountConnStringSecret&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">properties&lt;/span>: {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">roleDefinitionId&lt;/span>: &lt;span style="color:#50fa7b">subscriptionResourceId&lt;/span>(&lt;span style="color:#f1fa8c">&amp;#39;Microsoft.Authorization/roleDefinitions&amp;#39;&lt;/span>, &lt;span style="color:#8be9fd;font-style:italic">keyVaultSecretsUserRoleDefinitionId&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">principalId&lt;/span>: &lt;span style="color:#8be9fd;font-style:italic">managedIdentity&lt;/span>.&lt;span style="color:#8be9fd;font-style:italic">properties&lt;/span>.&lt;span style="color:#8be9fd;font-style:italic">principalId&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47&lt;/span>&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48&lt;/span>&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49&lt;/span>&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50&lt;/span>&lt;span>@&lt;span style="color:#50fa7b">description&lt;/span>(&lt;span style="color:#f1fa8c">&amp;#39;Adds the App Insights Instrumentation Key as a secret in KeyVault&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51&lt;/span>&lt;span>&lt;span style="color:#8be9fd;font-style:italic">resource&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">appInsightsSecret&lt;/span> &lt;span style="color:#f1fa8c">&amp;#39;Microsoft.KeyVault/vaults/secrets@2023-07-01&amp;#39;&lt;/span> = {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">name&lt;/span>: &lt;span style="color:#f1fa8c">&amp;#39;&lt;/span>&lt;span style="color:#f1fa8c">${&lt;/span>&lt;span style="color:#8be9fd;font-style:italic">appInsights&lt;/span>.&lt;span style="color:#8be9fd;font-style:italic">name&lt;/span>&lt;span style="color:#f1fa8c">}&lt;/span>&lt;span style="color:#f1fa8c">-instrumentationKey&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">parent&lt;/span>: &lt;span style="color:#8be9fd;font-style:italic">keyVault&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">tags&lt;/span>: {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">ResourceType&lt;/span>: &lt;span style="color:#f1fa8c">&amp;#39;AppInsights&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">ResourceName&lt;/span>: &lt;span style="color:#8be9fd;font-style:italic">appInsights&lt;/span>.&lt;span style="color:#8be9fd;font-style:italic">name&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57&lt;/span>&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">58&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">properties&lt;/span>: {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">59&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">contentType&lt;/span>: &lt;span style="color:#f1fa8c">&amp;#39;string&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">60&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">value&lt;/span>: &lt;span style="color:#8be9fd;font-style:italic">appInsights&lt;/span>.&lt;span style="color:#8be9fd;font-style:italic">properties&lt;/span>.&lt;span style="color:#8be9fd;font-style:italic">InstrumentationKey&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">61&lt;/span>&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">62&lt;/span>&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">63&lt;/span>&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">64&lt;/span>&lt;span>@&lt;span style="color:#50fa7b">description&lt;/span>(&lt;span style="color:#f1fa8c">&amp;#39;Gives permissions to the Managed Identity to retrieve the AppInsights Instrumentation Key from KeyVault&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">65&lt;/span>&lt;span>&lt;span style="color:#8be9fd;font-style:italic">resource&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">logicAppKeyVaultInstrumentationKeyPermission&lt;/span> &lt;span style="color:#f1fa8c">&amp;#39;Microsoft.Authorization/roleAssignments@2022-04-01&amp;#39;&lt;/span> = {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">66&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">name&lt;/span>: &lt;span style="color:#50fa7b">guid&lt;/span>(&lt;span style="color:#8be9fd;font-style:italic">keyVaultSecretsUserRoleDefinitionId&lt;/span>, &lt;span style="color:#8be9fd;font-style:italic">keyVault&lt;/span>.&lt;span style="color:#8be9fd;font-style:italic">id&lt;/span>, &lt;span style="color:#8be9fd;font-style:italic">managedIdentity&lt;/span>.&lt;span style="color:#8be9fd;font-style:italic">id&lt;/span>, &lt;span style="color:#8be9fd;font-style:italic">appInsights&lt;/span>.&lt;span style="color:#8be9fd;font-style:italic">id&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">67&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">scope&lt;/span>: &lt;span style="color:#8be9fd;font-style:italic">appInsightsSecret&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">68&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">properties&lt;/span>: {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">69&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">roleDefinitionId&lt;/span>: &lt;span style="color:#50fa7b">subscriptionResourceId&lt;/span>(&lt;span style="color:#f1fa8c">&amp;#39;Microsoft.Authorization/roleDefinitions&amp;#39;&lt;/span>, &lt;span style="color:#8be9fd;font-style:italic">keyVaultSecretsUserRoleDefinitionId&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">70&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">principalId&lt;/span>: &lt;span style="color:#8be9fd;font-style:italic">managedIdentity&lt;/span>.&lt;span style="color:#8be9fd;font-style:italic">properties&lt;/span>.&lt;span style="color:#8be9fd;font-style:italic">principalId&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">71&lt;/span>&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">72&lt;/span>&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">73&lt;/span>&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">74&lt;/span>&lt;span>@&lt;span style="color:#50fa7b">description&lt;/span>(&lt;span style="color:#f1fa8c">&amp;#39;Wait for 2 minutes to allow RBAC propagation to complete&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">75&lt;/span>&lt;span>&lt;span style="color:#8be9fd;font-style:italic">resource&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">deploymentScript&lt;/span> &lt;span style="color:#f1fa8c">&amp;#39;Microsoft.Resources/deploymentScripts@2023-08-01&amp;#39;&lt;/span> = {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">76&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">name&lt;/span>: &lt;span style="color:#f1fa8c">&amp;#39;inlineCLI&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">77&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">location&lt;/span>: &lt;span style="color:#8be9fd;font-style:italic">locationName&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">78&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">kind&lt;/span>: &lt;span style="color:#f1fa8c">&amp;#39;AzurePowerShell&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">79&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">properties&lt;/span>: {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">80&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">azPowerShellVersion&lt;/span>: &lt;span style="color:#f1fa8c">&amp;#39;12.2&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">81&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">scriptContent&lt;/span>: &lt;span style="color:#f1fa8c">&amp;#39;Start-Sleep -Seconds 120&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">82&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">retentionInterval&lt;/span>: &lt;span style="color:#f1fa8c">&amp;#39;PT1H&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">83&lt;/span>&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">84&lt;/span>&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="infrastructurebicep">
infrastructure.bicep
&lt;a class="heading-link" href="#infrastructurebicep">
&lt;i class="fa fa-link" aria-hidden="true" title="Link to heading">&lt;/i>
&lt;span class="sr-only">Link to heading&lt;/span>
&lt;/a>
&lt;/h2>
&lt;p>This is the main script, which deploys all resources, configures application settings and setups RBAC roles for the storage account&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bicep" data-lang="bicep">&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1&lt;/span>&lt;span>&lt;span style="color:#8be9fd;font-style:italic">param&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">subscriptionId&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">string&lt;/span> = &lt;span style="color:#50fa7b">subscription&lt;/span>().&lt;span style="color:#8be9fd;font-style:italic">id&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2&lt;/span>&lt;span>&lt;span style="color:#8be9fd;font-style:italic">param&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">projectName&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">string&lt;/span> = &lt;span style="color:#f1fa8c">&amp;#39;atlantis&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3&lt;/span>&lt;span>&lt;span style="color:#8be9fd;font-style:italic">param&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">environmentName&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">string&lt;/span> = &lt;span style="color:#f1fa8c">&amp;#39;dev&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4&lt;/span>&lt;span>&lt;span style="color:#8be9fd;font-style:italic">param&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">locationName&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">string&lt;/span> = &lt;span style="color:#50fa7b">resourceGroup&lt;/span>().&lt;span style="color:#8be9fd;font-style:italic">location&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5&lt;/span>&lt;span>&lt;span style="color:#8be9fd;font-style:italic">param&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">storageAccountName&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">string&lt;/span> = &lt;span style="color:#f1fa8c">&amp;#39;st&lt;/span>&lt;span style="color:#f1fa8c">${&lt;/span>&lt;span style="color:#8be9fd;font-style:italic">projectName&lt;/span>&lt;span style="color:#f1fa8c">}${&lt;/span>&lt;span style="color:#8be9fd;font-style:italic">environmentName&lt;/span>&lt;span style="color:#f1fa8c">}${&lt;/span>&lt;span style="color:#8be9fd;font-style:italic">locationName&lt;/span>&lt;span style="color:#f1fa8c">}&lt;/span>&lt;span style="color:#f1fa8c">&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6&lt;/span>&lt;span>&lt;span style="color:#8be9fd;font-style:italic">param&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">hostingPlanName&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">string&lt;/span> = &lt;span style="color:#f1fa8c">&amp;#39;app-&lt;/span>&lt;span style="color:#f1fa8c">${&lt;/span>&lt;span style="color:#8be9fd;font-style:italic">projectName&lt;/span>&lt;span style="color:#f1fa8c">}&lt;/span>&lt;span style="color:#f1fa8c">-&lt;/span>&lt;span style="color:#f1fa8c">${&lt;/span>&lt;span style="color:#8be9fd;font-style:italic">environmentName&lt;/span>&lt;span style="color:#f1fa8c">}&lt;/span>&lt;span style="color:#f1fa8c">-&lt;/span>&lt;span style="color:#f1fa8c">${&lt;/span>&lt;span style="color:#8be9fd;font-style:italic">locationName&lt;/span>&lt;span style="color:#f1fa8c">}&lt;/span>&lt;span style="color:#f1fa8c">&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7&lt;/span>&lt;span>&lt;span style="color:#8be9fd;font-style:italic">param&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">logicAppName&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">string&lt;/span> = &lt;span style="color:#f1fa8c">&amp;#39;logic-&lt;/span>&lt;span style="color:#f1fa8c">${&lt;/span>&lt;span style="color:#8be9fd;font-style:italic">projectName&lt;/span>&lt;span style="color:#f1fa8c">}&lt;/span>&lt;span style="color:#f1fa8c">-&lt;/span>&lt;span style="color:#f1fa8c">${&lt;/span>&lt;span style="color:#8be9fd;font-style:italic">environmentName&lt;/span>&lt;span style="color:#f1fa8c">}&lt;/span>&lt;span style="color:#f1fa8c">-&lt;/span>&lt;span style="color:#f1fa8c">${&lt;/span>&lt;span style="color:#8be9fd;font-style:italic">locationName&lt;/span>&lt;span style="color:#f1fa8c">}&lt;/span>&lt;span style="color:#f1fa8c">&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8&lt;/span>&lt;span>&lt;span style="color:#8be9fd;font-style:italic">param&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">keyVaultName&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">string&lt;/span> = &lt;span style="color:#f1fa8c">&amp;#39;kv-&lt;/span>&lt;span style="color:#f1fa8c">${&lt;/span>&lt;span style="color:#8be9fd;font-style:italic">projectName&lt;/span>&lt;span style="color:#f1fa8c">}&lt;/span>&lt;span style="color:#f1fa8c">-&lt;/span>&lt;span style="color:#f1fa8c">${&lt;/span>&lt;span style="color:#8be9fd;font-style:italic">environmentName&lt;/span>&lt;span style="color:#f1fa8c">}&lt;/span>&lt;span style="color:#f1fa8c">-&lt;/span>&lt;span style="color:#f1fa8c">${&lt;/span>&lt;span style="color:#8be9fd;font-style:italic">locationName&lt;/span>&lt;span style="color:#f1fa8c">}&lt;/span>&lt;span style="color:#f1fa8c">&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9&lt;/span>&lt;span>&lt;span style="color:#8be9fd;font-style:italic">var&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">isProduction&lt;/span> = &lt;span style="color:#8be9fd;font-style:italic">environmentName&lt;/span> &lt;span style="color:#ff79c6">==&lt;/span> &lt;span style="color:#f1fa8c">&amp;#39;prod&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 10&lt;/span>&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 11&lt;/span>&lt;span>&lt;span style="color:#6272a4">// Azure Built-in roles Ref: https://learn.microsoft.com/en-us/azure/role-based-access-control/built-in-roles&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 12&lt;/span>&lt;span>&lt;span style="color:#8be9fd;font-style:italic">var&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">storageAccountContributorRoleDefinitionId&lt;/span> = &lt;span style="color:#f1fa8c">&amp;#39;17d1049b-9a84-46fb-8f53-869881c3d3ab&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 13&lt;/span>&lt;span>&lt;span style="color:#8be9fd;font-style:italic">var&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">storageBlobDataOwnerRoleDefinitionId&lt;/span> = &lt;span style="color:#f1fa8c">&amp;#39;b7e6dc6d-f1e8-4753-8033-0f276bb0955b&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 14&lt;/span>&lt;span>&lt;span style="color:#8be9fd;font-style:italic">var&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">storageTableDataContributorRoleDefinitionId&lt;/span> = &lt;span style="color:#f1fa8c">&amp;#39;0a9a7e1f-b9d0-4cc4-a60d-0319b160aaa3&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 15&lt;/span>&lt;span>&lt;span style="color:#8be9fd;font-style:italic">var&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">storageQueueDataContributorRoleDefinitionId&lt;/span> = &lt;span style="color:#f1fa8c">&amp;#39;974c5e8b-45b9-4653-ba55-5f855dd0fb88&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 16&lt;/span>&lt;span>&lt;span style="color:#8be9fd;font-style:italic">var&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">monitoringMetricsPublisherRoleDefinitionId&lt;/span> = &lt;span style="color:#f1fa8c">&amp;#39;3913510d-42f4-4e42-8a64-420c390055eb&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 17&lt;/span>&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 18&lt;/span>&lt;span>&lt;span style="color:#8be9fd;font-style:italic">resource&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">managedIdentity&lt;/span> &lt;span style="color:#f1fa8c">&amp;#39;Microsoft.ManagedIdentity/userAssignedIdentities@2022-01-31-preview&amp;#39;&lt;/span> = {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 19&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">name&lt;/span>: &lt;span style="color:#f1fa8c">&amp;#39;mi-&lt;/span>&lt;span style="color:#f1fa8c">${&lt;/span>&lt;span style="color:#8be9fd;font-style:italic">projectName&lt;/span>&lt;span style="color:#f1fa8c">}&lt;/span>&lt;span style="color:#f1fa8c">-&lt;/span>&lt;span style="color:#f1fa8c">${&lt;/span>&lt;span style="color:#8be9fd;font-style:italic">environmentName&lt;/span>&lt;span style="color:#f1fa8c">}&lt;/span>&lt;span style="color:#f1fa8c">-&lt;/span>&lt;span style="color:#f1fa8c">${&lt;/span>&lt;span style="color:#8be9fd;font-style:italic">locationName&lt;/span>&lt;span style="color:#f1fa8c">}&lt;/span>&lt;span style="color:#f1fa8c">&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 20&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">location&lt;/span>: &lt;span style="color:#8be9fd;font-style:italic">locationName&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 21&lt;/span>&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 22&lt;/span>&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 23&lt;/span>&lt;span>&lt;span style="color:#8be9fd;font-style:italic">resource&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">keyVault&lt;/span> &lt;span style="color:#f1fa8c">&amp;#39;Microsoft.KeyVault/vaults@2023-07-01&amp;#39;&lt;/span> = {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 24&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">name&lt;/span>: &lt;span style="color:#8be9fd;font-style:italic">keyVaultName&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 25&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">location&lt;/span>: &lt;span style="color:#8be9fd;font-style:italic">locationName&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 26&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">properties&lt;/span>: {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 27&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">sku&lt;/span>: {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 28&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">name&lt;/span>: &lt;span style="color:#f1fa8c">&amp;#39;standard&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 29&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">family&lt;/span>: &lt;span style="color:#f1fa8c">&amp;#39;A&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 30&lt;/span>&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 31&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">tenantId&lt;/span>: &lt;span style="color:#50fa7b">subscription&lt;/span>().&lt;span style="color:#8be9fd;font-style:italic">tenantId&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 32&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">enableSoftDelete&lt;/span>: &lt;span style="color:#8be9fd;font-style:italic">isProduction&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 33&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">enableRbacAuthorization&lt;/span>: &lt;span style="color:#ff79c6">true&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 34&lt;/span>&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 35&lt;/span>&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 36&lt;/span>&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 37&lt;/span>&lt;span>&lt;span style="color:#8be9fd;font-style:italic">resource&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">storageAccount&lt;/span> &lt;span style="color:#f1fa8c">&amp;#39;Microsoft.Storage/storageAccounts@2022-05-01&amp;#39;&lt;/span> = {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 38&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">name&lt;/span>: &lt;span style="color:#8be9fd;font-style:italic">storageAccountName&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 39&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">location&lt;/span>: &lt;span style="color:#8be9fd;font-style:italic">locationName&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 40&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">tags&lt;/span>: {}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 41&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">sku&lt;/span>: {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 42&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">name&lt;/span>: &lt;span style="color:#f1fa8c">&amp;#39;Standard_LRS&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 43&lt;/span>&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 44&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">properties&lt;/span>: {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 45&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">supportsHttpsTrafficOnly&lt;/span>: &lt;span style="color:#ff79c6">true&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 46&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">minimumTlsVersion&lt;/span>: &lt;span style="color:#f1fa8c">&amp;#39;TLS1_2&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 47&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">defaultToOAuthAuthentication&lt;/span>: &lt;span style="color:#ff79c6">true&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 48&lt;/span>&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 49&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">kind&lt;/span>: &lt;span style="color:#f1fa8c">&amp;#39;StorageV2&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 50&lt;/span>&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 51&lt;/span>&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 52&lt;/span>&lt;span>&lt;span style="color:#8be9fd;font-style:italic">module&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">secrets&lt;/span> &lt;span style="color:#f1fa8c">&amp;#39;secrets.bicep&amp;#39;&lt;/span> = {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 53&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">name&lt;/span>: &lt;span style="color:#f1fa8c">&amp;#39;secrets-&lt;/span>&lt;span style="color:#f1fa8c">${&lt;/span>&lt;span style="color:#8be9fd;font-style:italic">environmentName&lt;/span>&lt;span style="color:#f1fa8c">}&lt;/span>&lt;span style="color:#f1fa8c">&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 54&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">params&lt;/span>: {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 55&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">projectName&lt;/span>: &lt;span style="color:#8be9fd;font-style:italic">projectName&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 56&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">environmentName&lt;/span>: &lt;span style="color:#8be9fd;font-style:italic">environmentName&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 57&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">locationName&lt;/span>: &lt;span style="color:#8be9fd;font-style:italic">locationName&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 58&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">storageAccountName&lt;/span>: &lt;span style="color:#8be9fd;font-style:italic">storageAccountName&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 59&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">keyVaultName&lt;/span>: &lt;span style="color:#8be9fd;font-style:italic">keyVaultName&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 60&lt;/span>&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 61&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">dependsOn&lt;/span>: [
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 62&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">managedIdentity&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 63&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">keyVault&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 64&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">storageAccount&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 65&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">appInsights&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 66&lt;/span>&lt;span> ]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 67&lt;/span>&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 68&lt;/span>&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 69&lt;/span>&lt;span>&lt;span style="color:#8be9fd;font-style:italic">resource&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">hostingPlan&lt;/span> &lt;span style="color:#f1fa8c">&amp;#39;Microsoft.Web/serverfarms@2022-09-01&amp;#39;&lt;/span> = {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 70&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">name&lt;/span>: &lt;span style="color:#8be9fd;font-style:italic">hostingPlanName&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 71&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">location&lt;/span>: &lt;span style="color:#8be9fd;font-style:italic">locationName&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 72&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">kind&lt;/span>: &lt;span style="color:#f1fa8c">&amp;#39;windows&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 73&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">sku&lt;/span>: {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 74&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">name&lt;/span>: &lt;span style="color:#f1fa8c">&amp;#39;WS1&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 75&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">tier&lt;/span>: &lt;span style="color:#f1fa8c">&amp;#39;WorkflowStandard&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 76&lt;/span>&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 77&lt;/span>&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 78&lt;/span>&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 79&lt;/span>&lt;span>&lt;span style="color:#8be9fd;font-style:italic">resource&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">logicApp&lt;/span> &lt;span style="color:#f1fa8c">&amp;#39;Microsoft.Web/sites@2022-09-01&amp;#39;&lt;/span> = {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 80&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">name&lt;/span>: &lt;span style="color:#8be9fd;font-style:italic">logicAppName&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 81&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">kind&lt;/span>: &lt;span style="color:#f1fa8c">&amp;#39;functionapp,workflowapp&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 82&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">location&lt;/span>: &lt;span style="color:#8be9fd;font-style:italic">locationName&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 83&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">tags&lt;/span>: {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 84&lt;/span>&lt;span> &lt;span style="color:#f1fa8c">&amp;#39;hidden-link: /app-insights-resource-id&amp;#39;&lt;/span>: &lt;span style="color:#f1fa8c">&amp;#39;/subscriptions/&lt;/span>&lt;span style="color:#f1fa8c">${&lt;/span>&lt;span style="color:#8be9fd;font-style:italic">subscriptionId&lt;/span>&lt;span style="color:#f1fa8c">}&lt;/span>&lt;span style="color:#f1fa8c">/resourceGroups/&lt;/span>&lt;span style="color:#f1fa8c">${&lt;/span>&lt;span style="color:#50fa7b">resourceGroup&lt;/span>().&lt;span style="color:#8be9fd;font-style:italic">name&lt;/span>&lt;span style="color:#f1fa8c">}&lt;/span>&lt;span style="color:#f1fa8c">/providers/Microsoft.Insights/components/&lt;/span>&lt;span style="color:#f1fa8c">${&lt;/span>&lt;span style="color:#8be9fd;font-style:italic">logicAppName&lt;/span>&lt;span style="color:#f1fa8c">}&lt;/span>&lt;span style="color:#f1fa8c">&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 85&lt;/span>&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 86&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">properties&lt;/span>: {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 87&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">publicNetworkAccess&lt;/span>: &lt;span style="color:#f1fa8c">&amp;#39;Enabled&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 88&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">httpsOnly&lt;/span>: &lt;span style="color:#ff79c6">true&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 89&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">serverFarmId&lt;/span>: &lt;span style="color:#8be9fd;font-style:italic">hostingPlan&lt;/span>.&lt;span style="color:#8be9fd;font-style:italic">id&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 90&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">keyVaultReferenceIdentity&lt;/span>: &lt;span style="color:#8be9fd;font-style:italic">managedIdentity&lt;/span>.&lt;span style="color:#8be9fd;font-style:italic">id&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 91&lt;/span>&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 92&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">identity&lt;/span>: {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 93&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">type&lt;/span>: &lt;span style="color:#f1fa8c">&amp;#39;UserAssigned&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 94&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">userAssignedIdentities&lt;/span>: {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 95&lt;/span>&lt;span> &lt;span style="color:#f1fa8c">&amp;#39;&lt;/span>&lt;span style="color:#f1fa8c">${&lt;/span>&lt;span style="color:#8be9fd;font-style:italic">managedIdentity&lt;/span>.&lt;span style="color:#8be9fd;font-style:italic">id&lt;/span>&lt;span style="color:#f1fa8c">}&lt;/span>&lt;span style="color:#f1fa8c">&amp;#39;&lt;/span>: {}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 96&lt;/span>&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 97&lt;/span>&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 98&lt;/span>&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 99&lt;/span>&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">100&lt;/span>&lt;span>&lt;span style="color:#8be9fd;font-style:italic">resource&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">logAnalyticsWS&lt;/span> &lt;span style="color:#f1fa8c">&amp;#39;Microsoft.OperationalInsights/workspaces@2023-09-01&amp;#39;&lt;/span> = {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">101&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">name&lt;/span>: &lt;span style="color:#f1fa8c">&amp;#39;log-&lt;/span>&lt;span style="color:#f1fa8c">${&lt;/span>&lt;span style="color:#8be9fd;font-style:italic">projectName&lt;/span>&lt;span style="color:#f1fa8c">}&lt;/span>&lt;span style="color:#f1fa8c">-&lt;/span>&lt;span style="color:#f1fa8c">${&lt;/span>&lt;span style="color:#8be9fd;font-style:italic">environmentName&lt;/span>&lt;span style="color:#f1fa8c">}&lt;/span>&lt;span style="color:#f1fa8c">-&lt;/span>&lt;span style="color:#f1fa8c">${&lt;/span>&lt;span style="color:#8be9fd;font-style:italic">locationName&lt;/span>&lt;span style="color:#f1fa8c">}&lt;/span>&lt;span style="color:#f1fa8c">&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">102&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">location&lt;/span>: &lt;span style="color:#8be9fd;font-style:italic">locationName&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">103&lt;/span>&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">104&lt;/span>&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">105&lt;/span>&lt;span>&lt;span style="color:#8be9fd;font-style:italic">resource&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">appInsights&lt;/span> &lt;span style="color:#f1fa8c">&amp;#39;microsoft.insights/components@2020-02-02-preview&amp;#39;&lt;/span> = {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">106&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">name&lt;/span>: &lt;span style="color:#f1fa8c">&amp;#39;appi-&lt;/span>&lt;span style="color:#f1fa8c">${&lt;/span>&lt;span style="color:#8be9fd;font-style:italic">projectName&lt;/span>&lt;span style="color:#f1fa8c">}&lt;/span>&lt;span style="color:#f1fa8c">-&lt;/span>&lt;span style="color:#f1fa8c">${&lt;/span>&lt;span style="color:#8be9fd;font-style:italic">environmentName&lt;/span>&lt;span style="color:#f1fa8c">}&lt;/span>&lt;span style="color:#f1fa8c">-&lt;/span>&lt;span style="color:#f1fa8c">${&lt;/span>&lt;span style="color:#8be9fd;font-style:italic">locationName&lt;/span>&lt;span style="color:#f1fa8c">}&lt;/span>&lt;span style="color:#f1fa8c">&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">107&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">location&lt;/span>: &lt;span style="color:#8be9fd;font-style:italic">locationName&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">108&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">kind&lt;/span>: &lt;span style="color:#f1fa8c">&amp;#39;web&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">109&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">properties&lt;/span>: {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">110&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">Request_Source&lt;/span>: &lt;span style="color:#f1fa8c">&amp;#39;IbizaWebAppExtensionCreate&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">111&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">Flow_Type&lt;/span>: &lt;span style="color:#f1fa8c">&amp;#39;Redfield&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">112&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">Application_Type&lt;/span>: &lt;span style="color:#f1fa8c">&amp;#39;web&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">113&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">DisableLocalAuth&lt;/span>: &lt;span style="color:#ff79c6">true&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">114&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">WorkspaceResourceId&lt;/span>: &lt;span style="color:#8be9fd;font-style:italic">logAnalyticsWS&lt;/span>.&lt;span style="color:#8be9fd;font-style:italic">id&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">115&lt;/span>&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">116&lt;/span>&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">117&lt;/span>&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">118&lt;/span>&lt;span>&lt;span style="color:#8be9fd;font-style:italic">resource&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">logicAppStorageAccountPermission&lt;/span> &lt;span style="color:#f1fa8c">&amp;#39;Microsoft.Authorization/roleAssignments@2022-04-01&amp;#39;&lt;/span> = {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">119&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">name&lt;/span>: &lt;span style="color:#50fa7b">guid&lt;/span>(&lt;span style="color:#8be9fd;font-style:italic">storageAccountContributorRoleDefinitionId&lt;/span>, &lt;span style="color:#8be9fd;font-style:italic">keyVault&lt;/span>.&lt;span style="color:#8be9fd;font-style:italic">id&lt;/span>, &lt;span style="color:#8be9fd;font-style:italic">storageAccount&lt;/span>.&lt;span style="color:#8be9fd;font-style:italic">id&lt;/span>, &lt;span style="color:#8be9fd;font-style:italic">managedIdentity&lt;/span>.&lt;span style="color:#8be9fd;font-style:italic">id&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">120&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">scope&lt;/span>: &lt;span style="color:#8be9fd;font-style:italic">storageAccount&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">121&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">properties&lt;/span>: {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">122&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">roleDefinitionId&lt;/span>: &lt;span style="color:#50fa7b">subscriptionResourceId&lt;/span>(&lt;span style="color:#f1fa8c">&amp;#39;Microsoft.Authorization/roleDefinitions&amp;#39;&lt;/span>, &lt;span style="color:#8be9fd;font-style:italic">storageAccountContributorRoleDefinitionId&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">123&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">principalId&lt;/span>: &lt;span style="color:#8be9fd;font-style:italic">managedIdentity&lt;/span>.&lt;span style="color:#8be9fd;font-style:italic">properties&lt;/span>.&lt;span style="color:#8be9fd;font-style:italic">principalId&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">124&lt;/span>&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">125&lt;/span>&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">126&lt;/span>&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">127&lt;/span>&lt;span>&lt;span style="color:#8be9fd;font-style:italic">resource&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">logicAppStorageBlobPermission&lt;/span> &lt;span style="color:#f1fa8c">&amp;#39;Microsoft.Authorization/roleAssignments@2022-04-01&amp;#39;&lt;/span> = {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">128&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">name&lt;/span>: &lt;span style="color:#50fa7b">guid&lt;/span>(&lt;span style="color:#8be9fd;font-style:italic">storageBlobDataOwnerRoleDefinitionId&lt;/span>, &lt;span style="color:#8be9fd;font-style:italic">keyVault&lt;/span>.&lt;span style="color:#8be9fd;font-style:italic">id&lt;/span>, &lt;span style="color:#8be9fd;font-style:italic">storageAccount&lt;/span>.&lt;span style="color:#8be9fd;font-style:italic">id&lt;/span>, &lt;span style="color:#8be9fd;font-style:italic">managedIdentity&lt;/span>.&lt;span style="color:#8be9fd;font-style:italic">id&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">129&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">scope&lt;/span>: &lt;span style="color:#8be9fd;font-style:italic">storageAccount&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">130&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">properties&lt;/span>: {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">131&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">roleDefinitionId&lt;/span>: &lt;span style="color:#50fa7b">subscriptionResourceId&lt;/span>(&lt;span style="color:#f1fa8c">&amp;#39;Microsoft.Authorization/roleDefinitions&amp;#39;&lt;/span>, &lt;span style="color:#8be9fd;font-style:italic">storageBlobDataOwnerRoleDefinitionId&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">132&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">principalId&lt;/span>: &lt;span style="color:#8be9fd;font-style:italic">managedIdentity&lt;/span>.&lt;span style="color:#8be9fd;font-style:italic">properties&lt;/span>.&lt;span style="color:#8be9fd;font-style:italic">principalId&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">133&lt;/span>&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">134&lt;/span>&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">135&lt;/span>&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">136&lt;/span>&lt;span>&lt;span style="color:#8be9fd;font-style:italic">resource&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">logicAppStorageTablesPermission&lt;/span> &lt;span style="color:#f1fa8c">&amp;#39;Microsoft.Authorization/roleAssignments@2022-04-01&amp;#39;&lt;/span> = {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">137&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">name&lt;/span>: &lt;span style="color:#50fa7b">guid&lt;/span>(&lt;span style="color:#8be9fd;font-style:italic">storageTableDataContributorRoleDefinitionId&lt;/span>, &lt;span style="color:#8be9fd;font-style:italic">keyVault&lt;/span>.&lt;span style="color:#8be9fd;font-style:italic">id&lt;/span>, &lt;span style="color:#8be9fd;font-style:italic">storageAccount&lt;/span>.&lt;span style="color:#8be9fd;font-style:italic">id&lt;/span>, &lt;span style="color:#8be9fd;font-style:italic">managedIdentity&lt;/span>.&lt;span style="color:#8be9fd;font-style:italic">id&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">138&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">scope&lt;/span>: &lt;span style="color:#8be9fd;font-style:italic">storageAccount&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">139&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">properties&lt;/span>: {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">140&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">roleDefinitionId&lt;/span>: &lt;span style="color:#50fa7b">subscriptionResourceId&lt;/span>(&lt;span style="color:#f1fa8c">&amp;#39;Microsoft.Authorization/roleDefinitions&amp;#39;&lt;/span>, &lt;span style="color:#8be9fd;font-style:italic">storageTableDataContributorRoleDefinitionId&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">141&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">principalId&lt;/span>: &lt;span style="color:#8be9fd;font-style:italic">managedIdentity&lt;/span>.&lt;span style="color:#8be9fd;font-style:italic">properties&lt;/span>.&lt;span style="color:#8be9fd;font-style:italic">principalId&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">142&lt;/span>&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">143&lt;/span>&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">144&lt;/span>&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">145&lt;/span>&lt;span>&lt;span style="color:#8be9fd;font-style:italic">resource&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">logicAppQueuePermission&lt;/span> &lt;span style="color:#f1fa8c">&amp;#39;Microsoft.Authorization/roleAssignments@2022-04-01&amp;#39;&lt;/span> = {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">146&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">name&lt;/span>: &lt;span style="color:#50fa7b">guid&lt;/span>(&lt;span style="color:#8be9fd;font-style:italic">storageQueueDataContributorRoleDefinitionId&lt;/span>, &lt;span style="color:#8be9fd;font-style:italic">keyVault&lt;/span>.&lt;span style="color:#8be9fd;font-style:italic">id&lt;/span>, &lt;span style="color:#8be9fd;font-style:italic">storageAccount&lt;/span>.&lt;span style="color:#8be9fd;font-style:italic">id&lt;/span>, &lt;span style="color:#8be9fd;font-style:italic">managedIdentity&lt;/span>.&lt;span style="color:#8be9fd;font-style:italic">id&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">147&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">scope&lt;/span>: &lt;span style="color:#8be9fd;font-style:italic">storageAccount&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">148&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">properties&lt;/span>: {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">149&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">roleDefinitionId&lt;/span>: &lt;span style="color:#50fa7b">subscriptionResourceId&lt;/span>(&lt;span style="color:#f1fa8c">&amp;#39;Microsoft.Authorization/roleDefinitions&amp;#39;&lt;/span>, &lt;span style="color:#8be9fd;font-style:italic">storageQueueDataContributorRoleDefinitionId&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">150&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">principalId&lt;/span>: &lt;span style="color:#8be9fd;font-style:italic">managedIdentity&lt;/span>.&lt;span style="color:#8be9fd;font-style:italic">properties&lt;/span>.&lt;span style="color:#8be9fd;font-style:italic">principalId&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">151&lt;/span>&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">152&lt;/span>&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">153&lt;/span>&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">154&lt;/span>&lt;span>&lt;span style="color:#8be9fd;font-style:italic">resource&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">logicAppMonitoringPermission&lt;/span> &lt;span style="color:#f1fa8c">&amp;#39;Microsoft.Authorization/roleAssignments@2022-04-01&amp;#39;&lt;/span> = {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">155&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">name&lt;/span>: &lt;span style="color:#50fa7b">guid&lt;/span>(&lt;span style="color:#8be9fd;font-style:italic">monitoringMetricsPublisherRoleDefinitionId&lt;/span>, &lt;span style="color:#8be9fd;font-style:italic">keyVault&lt;/span>.&lt;span style="color:#8be9fd;font-style:italic">id&lt;/span>, &lt;span style="color:#8be9fd;font-style:italic">appInsights&lt;/span>.&lt;span style="color:#8be9fd;font-style:italic">id&lt;/span>, &lt;span style="color:#8be9fd;font-style:italic">managedIdentity&lt;/span>.&lt;span style="color:#8be9fd;font-style:italic">id&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">156&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">scope&lt;/span>: &lt;span style="color:#8be9fd;font-style:italic">appInsights&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">157&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">properties&lt;/span>: {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">158&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">roleDefinitionId&lt;/span>: &lt;span style="color:#50fa7b">subscriptionResourceId&lt;/span>(&lt;span style="color:#f1fa8c">&amp;#39;Microsoft.Authorization/roleDefinitions&amp;#39;&lt;/span>, &lt;span style="color:#8be9fd;font-style:italic">monitoringMetricsPublisherRoleDefinitionId&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">159&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">principalId&lt;/span>: &lt;span style="color:#8be9fd;font-style:italic">managedIdentity&lt;/span>.&lt;span style="color:#8be9fd;font-style:italic">properties&lt;/span>.&lt;span style="color:#8be9fd;font-style:italic">principalId&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">160&lt;/span>&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">161&lt;/span>&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">162&lt;/span>&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">163&lt;/span>&lt;span>&lt;span style="color:#8be9fd;font-style:italic">resource&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">siteconfig&lt;/span> &lt;span style="color:#f1fa8c">&amp;#39;Microsoft.Web/sites/config@2022-09-01&amp;#39;&lt;/span> = {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">164&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">parent&lt;/span>: &lt;span style="color:#8be9fd;font-style:italic">logicApp&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">165&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">name&lt;/span>: &lt;span style="color:#f1fa8c">&amp;#39;web&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">166&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">kind&lt;/span>: &lt;span style="color:#f1fa8c">&amp;#39;string&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">167&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">properties&lt;/span>: {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">168&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">appSettings&lt;/span>: [
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">169&lt;/span>&lt;span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">170&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">name&lt;/span>: &lt;span style="color:#f1fa8c">&amp;#39;FUNCTIONS_EXTENSION_VERSION&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">171&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">value&lt;/span>: &lt;span style="color:#f1fa8c">&amp;#39;~4&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">172&lt;/span>&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">173&lt;/span>&lt;span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">174&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">name&lt;/span>: &lt;span style="color:#f1fa8c">&amp;#39;FUNCTIONS_WORKER_RUNTIME&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">175&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">value&lt;/span>: &lt;span style="color:#f1fa8c">&amp;#39;node&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">176&lt;/span>&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">177&lt;/span>&lt;span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">178&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">name&lt;/span>: &lt;span style="color:#f1fa8c">&amp;#39;WEBSITE_NODE_DEFAULT_VERSION&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">179&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">value&lt;/span>: &lt;span style="color:#f1fa8c">&amp;#39;~20&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">180&lt;/span>&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">181&lt;/span>&lt;span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">182&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">name&lt;/span>: &lt;span style="color:#f1fa8c">&amp;#39;APPINSIGHTS_INSTRUMENTATIONKEY&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">183&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">value&lt;/span>: &lt;span style="color:#f1fa8c">&amp;#39;@Microsoft.KeyVault(VaultName=&lt;/span>&lt;span style="color:#f1fa8c">${&lt;/span>&lt;span style="color:#8be9fd;font-style:italic">keyVaultName&lt;/span>&lt;span style="color:#f1fa8c">}&lt;/span>&lt;span style="color:#f1fa8c">;SecretName=&lt;/span>&lt;span style="color:#f1fa8c">${&lt;/span>&lt;span style="color:#8be9fd;font-style:italic">appInsights&lt;/span>.&lt;span style="color:#8be9fd;font-style:italic">name&lt;/span>&lt;span style="color:#f1fa8c">}&lt;/span>&lt;span style="color:#f1fa8c">-instrumentationKey)&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">184&lt;/span>&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">185&lt;/span>&lt;span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">186&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">name&lt;/span>: &lt;span style="color:#f1fa8c">&amp;#39;APPLICATIONINSIGHTS_AUTHENTICATION_STRING&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">187&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">value&lt;/span>: &lt;span style="color:#f1fa8c">&amp;#39;Authorization=AAD;ClientId=&lt;/span>&lt;span style="color:#f1fa8c">${&lt;/span>&lt;span style="color:#8be9fd;font-style:italic">managedIdentity&lt;/span>.&lt;span style="color:#8be9fd;font-style:italic">properties&lt;/span>.&lt;span style="color:#8be9fd;font-style:italic">clientId&lt;/span>&lt;span style="color:#f1fa8c">}&lt;/span>&lt;span style="color:#f1fa8c">&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">188&lt;/span>&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">189&lt;/span>&lt;span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">190&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">name&lt;/span>: &lt;span style="color:#f1fa8c">&amp;#39;WEBSITE_CONTENTAZUREFILECONNECTIONSTRING&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">191&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">value&lt;/span>: &lt;span style="color:#f1fa8c">&amp;#39;@Microsoft.KeyVault(VaultName=&lt;/span>&lt;span style="color:#f1fa8c">${&lt;/span>&lt;span style="color:#8be9fd;font-style:italic">keyVaultName&lt;/span>&lt;span style="color:#f1fa8c">}&lt;/span>&lt;span style="color:#f1fa8c">;SecretName=&lt;/span>&lt;span style="color:#f1fa8c">${&lt;/span>&lt;span style="color:#8be9fd;font-style:italic">storageAccount&lt;/span>.&lt;span style="color:#8be9fd;font-style:italic">name&lt;/span>&lt;span style="color:#f1fa8c">}&lt;/span>&lt;span style="color:#f1fa8c">-connectionString)&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">192&lt;/span>&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">193&lt;/span>&lt;span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">194&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">name&lt;/span>: &lt;span style="color:#f1fa8c">&amp;#39;WEBSITE_CONTENTSHARE&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">195&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">value&lt;/span>: &lt;span style="color:#f1fa8c">&amp;#39;&lt;/span>&lt;span style="color:#f1fa8c">${&lt;/span>&lt;span style="color:#50fa7b">toLower&lt;/span>(&lt;span style="color:#8be9fd;font-style:italic">storageAccountName&lt;/span>)&lt;span style="color:#f1fa8c">}&lt;/span>&lt;span style="color:#f1fa8c">-contentshare&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">196&lt;/span>&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">197&lt;/span>&lt;span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">198&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">name&lt;/span>: &lt;span style="color:#f1fa8c">&amp;#39;AzureFunctionsJobHost__extensionBundle__id&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">199&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">value&lt;/span>: &lt;span style="color:#f1fa8c">&amp;#39;Microsoft.Azure.Functions.ExtensionBundle.Workflows&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">200&lt;/span>&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">201&lt;/span>&lt;span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">202&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">name&lt;/span>: &lt;span style="color:#f1fa8c">&amp;#39;AzureFunctionsJobHost__extensionBundle__version&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">203&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">value&lt;/span>: &lt;span style="color:#f1fa8c">&amp;#39;[1.*, 2.0.0)&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">204&lt;/span>&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">205&lt;/span>&lt;span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">206&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">name&lt;/span>: &lt;span style="color:#f1fa8c">&amp;#39;APP_KIND&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">207&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">value&lt;/span>: &lt;span style="color:#f1fa8c">&amp;#39;workflowApp&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">208&lt;/span>&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">209&lt;/span>&lt;span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">210&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">name&lt;/span>:&lt;span style="color:#f1fa8c">&amp;#39;AzureWebJobsStorage__blobServiceUri&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">211&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">value&lt;/span>: &lt;span style="color:#8be9fd;font-style:italic">storageAccount&lt;/span>.&lt;span style="color:#8be9fd;font-style:italic">properties&lt;/span>.&lt;span style="color:#8be9fd;font-style:italic">primaryEndpoints&lt;/span>.&lt;span style="color:#8be9fd;font-style:italic">blob&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">212&lt;/span>&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">213&lt;/span>&lt;span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">214&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">name&lt;/span>:&lt;span style="color:#f1fa8c">&amp;#39;AzureWebJobsStorage__queueServiceUri&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">215&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">value&lt;/span>: &lt;span style="color:#8be9fd;font-style:italic">storageAccount&lt;/span>.&lt;span style="color:#8be9fd;font-style:italic">properties&lt;/span>.&lt;span style="color:#8be9fd;font-style:italic">primaryEndpoints&lt;/span>.&lt;span style="color:#8be9fd;font-style:italic">queue&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">216&lt;/span>&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">217&lt;/span>&lt;span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">218&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">name&lt;/span>:&lt;span style="color:#f1fa8c">&amp;#39;AzureWebJobsStorage__tableServiceUri&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">219&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">value&lt;/span>: &lt;span style="color:#8be9fd;font-style:italic">storageAccount&lt;/span>.&lt;span style="color:#8be9fd;font-style:italic">properties&lt;/span>.&lt;span style="color:#8be9fd;font-style:italic">primaryEndpoints&lt;/span>.&lt;span style="color:#8be9fd;font-style:italic">table&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">220&lt;/span>&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">221&lt;/span>&lt;span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">222&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">name&lt;/span>:&lt;span style="color:#f1fa8c">&amp;#39;AzureWebJobsStorage__credential&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">223&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">value&lt;/span>: &lt;span style="color:#f1fa8c">&amp;#39;managedIdentity&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">224&lt;/span>&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">225&lt;/span>&lt;span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">226&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">name&lt;/span>:&lt;span style="color:#f1fa8c">&amp;#39;AzureWebJobsStorage__managedIdentityResourceId&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">227&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">value&lt;/span>: &lt;span style="color:#8be9fd;font-style:italic">managedIdentity&lt;/span>.&lt;span style="color:#8be9fd;font-style:italic">id&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">228&lt;/span>&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">229&lt;/span>&lt;span> ]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">230&lt;/span>&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">231&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">dependsOn&lt;/span>: [
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">232&lt;/span>&lt;span> &lt;span style="color:#8be9fd;font-style:italic">secrets&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">233&lt;/span>&lt;span> ]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">234&lt;/span>&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="outcome">
Outcome
&lt;a class="heading-link" href="#outcome">
&lt;i class="fa fa-link" aria-hidden="true" title="Link to heading">&lt;/i>
&lt;span class="sr-only">Link to heading&lt;/span>
&lt;/a>
&lt;/h2>
&lt;p>The script runs without errors or warnings, and the infrastructure is now available.&lt;/p>
&lt;p>&lt;img src="https://davidtriana.com/images/posts/2024/no-secrets-deployed.png" alt="Infrastructure deployed">&lt;/p>
&lt;h2 id="workflow-test">
Workflow Test
&lt;a class="heading-link" href="#workflow-test">
&lt;i class="fa fa-link" aria-hidden="true" title="Link to heading">&lt;/i>
&lt;span class="sr-only">Link to heading&lt;/span>
&lt;/a>
&lt;/h2>
&lt;p>While the fact that the deployment worked and the logic app is able to show the runtime version without error notifications is a good sign, nothing like a simple test, so I created the simplest workflow then verified run history with per action state.&lt;/p>
&lt;p>&lt;img src="https://davidtriana.com/images/posts/2024/no-secrets-workflow-test.png" alt="Simple workflow state and history">&lt;/p>
&lt;h2 id="application-insights">
Application Insights
&lt;a class="heading-link" href="#application-insights">
&lt;i class="fa fa-link" aria-hidden="true" title="Link to heading">&lt;/i>
&lt;span class="sr-only">Link to heading&lt;/span>
&lt;/a>
&lt;/h2>
&lt;p>Telemetry is being captured by Application Insights.&lt;/p>
&lt;p>&lt;img src="https://davidtriana.com/images/posts/2024/no-secrets-appinsights-test.png" alt="Telemetry in app insights">&lt;/p></description></item></channel></rss>